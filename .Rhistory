library(TreeData)
library(TreeData)
usethis::use_vignette("TreeData")
usethis::use_testthat()
library(TreeData)
library(TreeData)
usethis::use_github_action_check_standard()
library(TreeData)
library(TreeData)
Paracou_subset <- read_delim("D:/VSC TmFO/Data/Paracou_subset.csv",
";", escape_double = FALSE, locale = locale(encoding = "latin1"),
trim_ws = TRUE)
library(readr)
Paracou_subset <- read_delim("D:/VSC TmFO/Data/Paracou_subset.csv",
";", escape_double = FALSE, locale = locale(encoding = "latin1"),
trim_ws = TRUE)
Acre_site <- read_delim("D:/VSC TmFO/Data/Acre_site_Marcus - Copie.csv",
";", escape_double = FALSE, locale = locale(decimal_mark = ",",
encoding = "latin1"), trim_ws = TRUE)
Paracou_subset <- fread("D:/VSC TmFO/Data/Paracou_subset.csv")
library(data.table)
Paracou_subset <- fread("D:/VSC TmFO/Data/Paracou_subset.csv")
View(Paracou_subset)
Acre_site <- fread("D:/VSC TmFO/Data/Acre_site_Marcus - Copie.csv")
Guarani_site <- fread("D:/VSC TmFO/Data/Guarani_site.csv")
Mbaiki_site <- fread("D:/VSC TmFO/Data/Mbaiki_site.csv")
View(Acre_site)
View(Guarani_site)
View(Mbaiki_site)
Mbaiki_site <- fread("D:/VSC TmFO/Data/Mbaiki_site.csv", encoding = "Latin-1")
View(Mbaiki_site)
Mbaiki_site <- fread("D:/VSC TmFO/Data/Mbaiki_site.csv", encoding = "UTF-8")
class(Paracou_subset)
args <- c(Plot, SubPlot, Time, IdTree, LifeStatus,
Size, SizeUnit, POM, POMUnit,
PlotArea, X, Y,
ScientificName, VernName, Family, Genus, Species, CommercialSp,
TreeHeight, TreeHeightUnit)
Plot = NULL
SubPlot = NULL
args <- c(Plot, SubPlot)
args
args <- c("a", "b", "c")
args - "a"
args [!args %in% c("a","b")]
class("a")
devtools::load_all(".")
library(TreeData)
View(Paracou_subset)
RequiredFormat(Paracou_subset,
Plot = "Plot",
SubPlot = "SubPlot",
Time = "CensusYear",
IdTree = "idTree",
LifeStatus = "CodeAlive",
Size = "Circ",
SizeUnit = NULL,
POM = "MeasCode",
POMUnit = NULL,
PlotArea = "PlotArea",
X = "Xutm",
Y = "Yutm",
ScientificName = NULL,
VernName = "VernName",
Family = "Family",
Genus = "Genus",
Species = "Species",
CommercialSp = "CommercialSp",
TreeHeight = NULL,
TreeHeightUnit = NULL)
Size = "Circ"
SizeUnit = NULL
arg <- c("a", NULL)
arg
arg <- c(a = "a", b = NULL)
arg
arg$a
b
devtools::load_all(".")
library(TreeData)
RequiredFormat(Paracou_subset,
Plot = "Plot",
SubPlot = "SubPlot",
Time = "CensusYear",
IdTree = "idTree",
LifeStatus = "CodeAlive",
Size = "Circ",
SizeUnit = NULL,
POM = "MeasCode",
POMUnit = NULL,
PlotArea = "PlotArea",
X = "Xutm",
Y = "Yutm",
ScientificName = NULL,
VernName = "VernName",
Family = "Family",
Genus = "Genus",
Species = "Species",
CommercialSp = "CommercialSp",
TreeHeight = NULL,
TreeHeightUnit = NULL)
Plot = "Plot"
SubPlot = "SubPlot"
Time = "CensusYear"
IdTree = "idTree"
LifeStatus = "CodeAlive"
Size = "Circ"
SizeUnit = NULL
args <- c(Plot, SubPlot, Time, IdTree, LifeStatus,
Size, SizeUnit, POM, POMUnit,
PlotArea, X, Y,
ScientificName, VernName, Family, Genus, Species, CommercialSp,
TreeHeight, TreeHeightUnit)
Plot = "Plot"
SubPlot = "SubPlot"
Time = "CensusYear"
IdTree = "idTree"
LifeStatus = "CodeAlive"
Size = "Circ"
SizeUnit = NULL
POM = NULL
POMUnit = NULL
PlotArea = NULL
X = NULL
Y = NULL
ScientificName = NULL
VernName = NULL
Family = NULL
Genus = NULL
Species = NULL
CommercialSp = NULL
TreeHeight = NULL
TreeHeightUnit = NULL
args <- c(Plot, SubPlot, Time, IdTree, LifeStatus,
Size, SizeUnit, POM, POMUnit,
PlotArea, X, Y,
ScientificName, VernName, Family, Genus, Species, CommercialSp,
TreeHeight, TreeHeightUnit)
args
argsCol <- args[!args %in% c(SizeUnit, POMUnit, TreeHeightUnit)] # columns names arguments
argsCol
argsUnit <- args[args %in% c(SizeUnit, POMUnit, TreeHeightUnit)] # units arguments
argsUnit
stop("Data must be a data.frame")
if (!inherits(Data, "data.frame"))
stop("Data must be a data.frame")
Data = Paracou_subset
if (!inherits(Data, "data.frame"))
stop("Data must be a data.frame")
for(i in 1:length(args)) # all args
if(!inherits(args[i], "character"))
stop(paste0("must be in character"[i]))
for(i in 1:length(argsUnit))
if(!argsUnit[i] %in% c("mm", "millimetre", "millimeter", "milímetro", "milimétrica",
"cm", "centimetre", "centimeter", "centímetro",
"dm", "decimetre", "decimeter", "decímetro",
"m", "metre", "meter", "metro",
))
stop("Please indicate units with 'mm' for millimetres, 'cm' for
centimetres, 'dm' for decimetres and 'm' for metres")
devtools::load_all(".")
length(argsUnit) > 0
if(length(argsUnit) > 0){
for(i in 1:length(argsUnit))
if(!argsUnit[i] %in% c("mm", "millimetre", "millimeter", "milímetro", "milimétrica",
"cm", "centimetre", "centimeter", "centímetro",
"dm", "decimetre", "decimeter", "decímetro",
"m", "metre", "meter", "metro",
))
stop("Please indicate units with 'mm' for millimetres, 'cm' for
centimetres, 'dm' for decimetres and 'm' for metres")
}
for(i in 1:length(argsCol))
if(!argsCol[i] %in% names(Data))
stop(paste0("is not a column name of your dataset"[i]))
# if the variable exists but the unit is NULL
if(is.null(SizeUnit) & !is.null(Size))
stop("Please indicate in which unit ('SizeUnit') the 'Size' of your tree is measured")
if(is.null(POMUnit) & !is.null(POM))
stop("Please indicate in which unit ('POMUnit') the 'POM'
(Point Of Measurement) of your tree is measured")
if(is.null(TreeHeightUnit) & !is.null(TreeHeight))
stop("Please indicate in which unit ('TreeHeightUnit') the 'TreeHeight' is measured")
library(TreeData)
RequiredFormat(Paracou_subset,
Plot = "Plot",
SubPlot = "SubPlot",
Time = "CensusYear",
IdTree = "idTree",
LifeStatus = "CodeAlive",
Size = "Circ",
SizeUnit = NULL,
POM = "MeasCode",
POMUnit = NULL,
PlotArea = "PlotArea",
X = "Xutm",
Y = "Yutm",
ScientificName = NULL,
VernName = "VernName",
Family = "Family",
Genus = "Genus",
Species = "Species",
CommercialSp = "CommercialSp",
TreeHeight = NULL,
TreeHeightUnit = NULL)
DataInput <- copy(Data) # input data copy
## data.frame to data.table
setDT(Data)
class(Data)
DT = data.table(A=1:10, B=letters[1:10])
DT2 = data.table(A=1:10000, ColB=10000:1)
setkey(DT,B)
tables()
started.at=proc.time()
Sys.sleep(1)
cat("Finished in",timetaken(started.at),"\n")
devtools::load_all(".")
devtools::load_all(".")
library(TreeData)
BarroColoradoSubset <- fread("D:/VSC TmFO/Data/Barro Colorado_data/FullMeasurementBCI/Barro Colorado_fulldata.tsv")
library(data.table)
BarroColoradoSubset <- fread("D:/VSC TmFO/Data/Barro Colorado_data/FullMeasurementBCI/Barro Colorado_fulldata.tsv")
View(BarroColoradoSubset)
summary(BarroColoradoSubset)
unique(BarroColoradoSubset$TreeID)
length
length(unique(BarroColoradoSubset$TreeID))
length(unique(BarroColoradoSubset$PlotCensusNumber))
length(unique(BarroColoradoSubset$QuadratName))
length(unique(BarroColoradoSubset$QuadratID))
length(unique(BarroColoradoSubset$QuadratName))
length(unique(BarroColoradoSubset$ExactDate))
unique(BarroColoradoSubset$ExactDate)
sort(unique(BarroColoradoSubset$ExactDate))
class(BarroColoradoSubset$ExactDate)
